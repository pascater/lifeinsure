<!DOCTYPE html> 
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image:src" content="assets/images/test-api-meta.png" />
    <meta property="og:image" content="assets/images/test-api-meta.png" />
    <meta name="twitter:title" content="Todesfallversicherung Pr&auml;mienrechner f&uuml;r die Schweiz Tessin" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <link
      rel="shortcut icon"
      href="assets/images/lifeinsure-1-172x172.png"
      type="image/x-icon"
    />
    <meta
      name="description"
      content="Todesfallversicherung Pr&auml;mienrechner f&uuml;r die Schweiz Tessin"
    />

    <title>
      Berechnen Sie hier die Kosten Ihrer Todesfallversicherung
    </title>
    <link
      rel="stylesheet"
      href="assets/Material-Design-Icons/css/material.css"
    />
    <link rel="stylesheet" href="assets/icon54/style.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css" />
    <link
      rel="stylesheet"
      href="assets/bootstrap/css/bootstrap-reboot.min.css"
    />
    <link
      rel="stylesheet"
      href="assets/web/assets/gdpr-plugin/gdpr-styles.css"
    />
    <link rel="stylesheet" href="assets/popup-overlay-plugin/style.css" />
    <link rel="stylesheet" href="assets/dropdown/css/style.css" />
    <link rel="stylesheet" href="assets/socicon/css/styles.css" />
    <link rel="stylesheet" href="assets/theme/css/style.css" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,400,500,600,700&display=swap"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,400,500,600,700&display=swap"
    /></noscript>
    <link
      rel="preload"
      as="style"
      href="assets/mobirise/css/mbr-additional.css"
    />
    <link
      rel="stylesheet"
      href="assets/mobirise/css/mbr-additional.css"
      type="text/css"
    />

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { padding-top: 70px; } /* Reduziert von höheren Werten, um dem Menü weniger Platz zu geben */
        html { scroll-behavior: smooth; }
        /* Bootstrap 5 Validierungsstile */
        .form-control.is-invalid, .form-select.is-invalid { border-color: #dc3545; padding-right: calc(1.5em + .75rem); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right calc(.375em + .1875rem) center; background-size: calc(.75em + .375rem) calc(.75em + .375rem); }
        .invalid-feedback { display: none; width: 100%; margin-top: .25rem; font-size: .875em; color: #dc3545; }
        /* Standardfeedback anzeigen, wenn validiert und ungültig */
        .was-validated :invalid ~ .invalid-feedback,
        .was-validated .form-select:invalid ~ .invalid-feedback, /* Hinzugefügt für Auswahl */
        .was-validated .form-control:invalid ~ .invalid-feedback { display: block; }
        /* Spezifisches Feedback für Dauer anzeigen, wenn is-invalid */
        #durata-error.is-invalid { display: block; }
        
        /* FIX FÜR ZU GROSSES MENÜ */
        .navbar {
            padding-top: 0.25rem !important;
            padding-bottom: 0.25rem !important;
            min-height: unset !important;
        }
        
        .inspirem5.menu {
            padding-top: 0 !important;
            padding-bottom: 0 !important;
        }
        
        .header3 {
            padding-top: 0 !important;
        }
        
        .navbar-logo img {
            height: 2.8rem !important; /* Etwas kleineres Logo */
        }
        
        /* Reduzieren des Abstands zwischen Menü und Inhalt */
        #sezione-calcolo-premio {
            padding-top: 1rem !important;
        }
    </style>
  </head>
  <body>
    <!-- ================== ERSATZ-MENÜ ================== -->
    <section data-bs-version="5.1" class="inspirem5 menu menu1 cid-uHcV8yKzqs" once="menu" id="menu01-3s">
      <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container-fluid">
          <div class="navbar-brand">
            <span class="navbar-logo">
              <a href="index.html">
              <img src="assets/images/lifeinsure-1-172x172.png" alt="LifeInsure Logo" style="height: 2.8rem" />
              </a>
            </span>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbarSupportedContent" data-bs-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger"><span></span><span></span><span></span><span></span></div>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown" data-app-modern-menu="true">
              <li class="nav-item"><a class="nav-link link text-primary display-7" href="index.html#header01-2">Startseite</a></li>
              <li class="nav-item dropdown">
                <a class="nav-link link text-primary dropdown-toggle display-7" href="#" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">Todesfallversicherung</a>
                <div class="dropdown-menu" aria-labelledby="dropdown-707">
                  <a class="text-primary dropdown-item display-7" href="index.html#progress-bars02-0">Vorteile</a>
                  <a class="text-primary show dropdown-item display-7" href="index.html#progress-bars01-j">Wert</a>
                  <!-- Link Popup echte Geschichte (stellen Sie sicher, dass #mbr-popup-2k auf der Seite existiert oder entfernen/ändern Sie ihn) -->
                  <a class="text-primary show dropdown-item display-7" href="#" data-toggle="modal" data-bs-toggle="modal" data-target="#mbr-popup-2k" data-bs-target="#mbr-popup-2k"><span class="mdi-content-markunread mbr-iconfont mbr-iconfont-btn"></span>Eine wahre Geschichte (lesen)</a>
                  <a class="text-primary show dropdown-item display-7" href="index.html#testimonials04-g">Erfahrungsberichte</a>
                </div>
              </li>
              <li class="nav-item"><a class="nav-link link text-primary display-7" href="index.html#forms03-5">Über uns</a></li>
              <li class="nav-item"><a class="nav-link link text-primary display-7" href="index.html#forms03-5">Kontakt</a></li>
              <li class="nav-item dropdown">
                 <a class="nav-link link text-primary dropdown-toggle show display-7" href="#" data-toggle="dropdown-submenu" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false"><span class="icon54-v1-translate2 mbr-iconfont mbr-iconfont-btn"></span></a>
                 <div class="dropdown-menu show" aria-labelledby="dropdown-852" data-bs-popper="none">
                     <a class="text-primary dropdown-item display-7" href="https://fr.lifeinsure.ch" target="_blank">Français</a>
                     <a class="text-primary dropdown-item display-7" href="https://lifeinsure.ch" target="_blank">Italiano</a>
                 </div>
              </li>
            </ul>
            <div class="navbar-buttons mbr-section-btn">
              <a class="btn btn-lg btn-danger display-4" href="index.html#features04-2"><span class="icon54-v1-click-1 mbr-iconfont mbr-iconfont-btn"></span>ANGEBOT</a>
            </div>
          </div>
        </div>
      </nav>
    </section>
    <!-- ================== ENDE ERSATZ-MENÜ ================== -->

    <div id="custom-html-36">
      <section class="mbr-section form-section" id="sezione-calcolo-premio">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <div class="card shadow-sm p-4">
                <h2 class="card-title text-center mb-4">
                  Berechnen Sie Ihre Versicherungsprämie
                </h2>

                <form id="form-calcolo-premio" novalidate>
                  <div class="form-group mb-3">
                    <label for="data-nascita" class="form-label"
                      >Geburtsdatum *</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="data-nascita"
                      required
                      aria-describedby="data-nascita-error"
                    />
                     <div id="data-nascita-error" class="invalid-feedback">Bitte geben Sie ein gültiges Geburtsdatum ein.</div>
                    <small class="form-text text-muted"
                      >Geben Sie Ihr Geburtsdatum ein</small
                    >
                  </div>

                  <div class="form-check mb-3">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      id="fumatore"
                    />
                    <label class="form-check-label" for="fumatore"
                      >Raucher</label
                    >
                    <small class="d-block form-text text-muted"
                      >Ankreuzen, wenn Sie Raucher sind</small
                    >
                  </div>

                  <div class="form-group mb-3">
                    <label for="durata-select" class="form-label"
                      >Dauer (Jahre) *</label
                    >
                    <select
                      class="form-select"
                      id="durata-select"
                      aria-describedby="durata-error"
                      onchange="toggleDurataPersonalizzata()"
                    >
                      <option value="" disabled selected>
                        Dauer auswählen
                      </option>
                      <option value="5">5 Jahre</option>
                      <option value="10">10 Jahre</option>
                      <option value="15">15 Jahre</option>
                      <option value="20">20 Jahre</option>
                      <option value="25">25 Jahre</option>
                      <option value="30">30 Jahre</option>
                      <option value="custom">Eigene Dauer wählen</option>
                    </select>
                    <div id="durata-custom-container" class="mt-2 d-none">
                      <div class="input-group">
                        <input
                          type="number"
                          class="form-control"
                          id="durata-custom"
                          min="5"
                          max="30"
                          placeholder="Dauer eingeben (5-30 Jahre)"
                          aria-describedby="durata-error"
                        />
                        <span class="input-group-text">Jahre</span>
                      </div>
                    </div>
                    <div id="durata-error" class="invalid-feedback">Bitte wählen Sie eine gültige Dauer oder geben Sie eine benutzerdefinierte Dauer ein (5-30 Jahre).</div>
                    <input type="hidden" id="durata" name="durata" />
                    <small class="form-text text-muted"
                      >Wählen Sie die Dauer des Versicherungsschutzes</small
                    >
                  </div>

                  <!-- Versicherungssumme -->
                  <div class="form-group mb-3">
                    <label for="copertura" class="form-label"
                      >Versicherungssumme (CHF) *</label
                    >
                    <div class="input-group">
                      <input
                        type="number"
                        class="form-control"
                        id="copertura"
                        min="20000"
                        max="600000"
                        step="10000"
                        value="100000"
                        required
                        aria-describedby="copertura-error"
                      />
                      <span class="input-group-text">CHF</span>
                    </div>
                     <div id="copertura-error" class="invalid-feedback">Bitte geben Sie eine gültige Versicherungssumme ein (min 20.000, max 600.000).</div>
                    <small class="form-text text-muted"
                      >Versicherungssumme (Minimum 20.000 CHF)</small
                    >
                  </div>

                  <!-- Körperdaten: Größe und Gewicht -->
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="altezza" class="form-label"
                          >Größe (cm) *</label
                        >
                        <div class="input-group">
                          <input
                            type="number"
                            class="form-control"
                            id="altezza"
                            min="100"
                            max="250"
                            placeholder="z.B. 175"
                            required
                            aria-describedby="altezza-error"
                          />
                          <span class="input-group-text">cm</span>
                        </div>
                         <div id="altezza-error" class="invalid-feedback">Bitte geben Sie eine gültige Größe ein (100-250 cm).</div>
                        <small class="form-text text-muted"
                          >Geben Sie Ihre Größe ein</small
                        >
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label for="peso" class="form-label">Gewicht (kg) *</label>
                        <div class="input-group">
                          <input
                            type="number"
                            class="form-control"
                            id="peso"
                            min="30"
                            max="200"
                            placeholder="z.B. 70"
                            required
                            aria-describedby="peso-error"
                          />
                          <span class="input-group-text">kg</span>
                        </div>
                         <div id="peso-error" class="invalid-feedback">Bitte geben Sie ein gültiges Gewicht ein (30-200 kg).</div>
                        <small class="form-text text-muted"
                          >Geben Sie Ihr Gewicht ein</small
                        >
                      </div>
                    </div>
                  </div>

                  <!-- Berechnen-Button -->
                  <div class="text-center mt-4">
                    <button type="submit" id="calcola-premio-btn" class="btn btn-primary btn-lg px-5">
                      Prämie berechnen
                    </button>
                  </div>
                </form>

                <!-- Ergebnisbereich -->
                <div id="risultato-premio" class="mt-4 p-3 d-none">
                  <!-- Die Ergebnisse werden hier über JavaScript eingefügt -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/smoothscroll/smooth-scroll.js"></script>
    <script src="assets/ytplayer/index.js"></script>
    <script src="assets/dropdown/js/navbar-dropdown.js"></script>
    <script src="assets/theme/js/script.js"></script>

    <!-- Stellen Sie sicher, dass diese Skripte existieren und korrekt sind -->
    <script src="assets/api/test-connection.js"></script>
    <script src="assets/api/calcola-premio.js"></script>
    <script src="assets/api/check-age.js"></script>

    <script>
      'use strict';

      /**
       * Verwaltet UI und versteckten Wert für benutzerdefinierte Dauer.
       */
      function toggleDurataPersonalizzata() {
        const durataSelect = document.getElementById("durata-select");
        const durataCustomContainer = document.getElementById("durata-custom-container");
        const durataCustomInput = document.getElementById("durata-custom");
        const durataHidden = document.getElementById("durata");
        const durataErrorDiv = document.getElementById('durata-error');

        if (!durataSelect || !durataCustomContainer || !durataCustomInput || !durataHidden) return;

        const isCustom = durataSelect.value === "custom";
        durataCustomContainer.classList.toggle("d-none", !isCustom);

        if (!isCustom) {
          durataCustomInput.value = ""; // Benutzerdefinierten Wert löschen
          durataHidden.value = durataSelect.value; // Auswahlwert verwenden (falls gültig)
        } else {
          durataHidden.value = ""; // Hidden leeren, Wert wird vom benutzerdefinierten Feld kommen
          durataCustomInput.focus();
        }

        // Zurücksetzen der Dauerfehlermeldungen bei Änderung der Auswahl
        durataSelect.classList.remove('is-invalid');
        durataCustomInput.classList.remove('is-invalid');
        if (durataErrorDiv) durataErrorDiv.classList.remove('is-invalid'); // Allgemeinen Fehler ausblenden
      }

      /**
       * Aktualisiert verstecktes #durata-Eingabefeld, wenn sich #durata-custom ändert.
       */
       function updateHiddenDurationFromCustom() {
           const durataCustomInput = document.getElementById("durata-custom");
           const durataHidden = document.getElementById("durata");
           const durataSelect = document.getElementById("durata-select");
           const durataErrorDiv = document.getElementById('durata-error');

           if (!durataCustomInput || !durataHidden || !durataSelect) return;

           if (durataSelect.value === 'custom') {
               // checkValidity() des number-Eingabefelds verwenden, das min/max berücksichtigt
               if (durataCustomInput.checkValidity()) {
                   durataHidden.value = durataCustomInput.value;
                   // Fehlermeldungen entfernen, wenn jetzt gültig
                   durataCustomInput.classList.remove('is-invalid');
                   durataSelect.classList.remove('is-invalid');
                   if (durataErrorDiv) durataErrorDiv.classList.remove('is-invalid');
               } else {
                   durataHidden.value = ""; // Ungültig, hidden leeren
               }
           }
       }


      document.addEventListener("DOMContentLoaded", function () {
        const formPremio = document.getElementById("form-calcolo-premio");
        const risultatoPremio = document.getElementById("risultato-premio");
        const dateInput = document.getElementById("data-nascita");
        const calcolaBtn = document.getElementById("calcola-premio-btn");
        const durataSelect = document.getElementById("durata-select");
        const durataCustomInput = document.getElementById("durata-custom");
        const durataHidden = document.getElementById("durata");
        const durataErrorDiv = document.getElementById('durata-error');

        // Altersprüfung
        if (typeof checkAge === 'function' && dateInput) {
          checkAge(dateInput);
        } else if (!dateInput) {
            console.warn("Element data-nascita nicht gefunden.");
        }

        // Listener für benutzerdefinierte Eingabe
        if (durataCustomInput) {
            durataCustomInput.addEventListener('input', updateHiddenDurationFromCustom);
        } else {
             console.error("Element durata-custom nicht gefunden.");
        }
        // Listener für Select (um toggle aufzurufen und hidden zu aktualisieren)
        if (durataSelect) {
            durataSelect.addEventListener('change', toggleDurataPersonalizzata);
        } else {
             console.error("Element durata-select nicht gefunden.");
        }


        if (formPremio && risultatoPremio && calcolaBtn && durataSelect && durataCustomInput && durataHidden && durataErrorDiv) {
          formPremio.addEventListener("submit", async function (e) {
            e.preventDefault();

            // --- Zurücksetzen ---
            calcolaBtn.classList.remove('btn-success');
            calcolaBtn.classList.add('btn-primary');
            formPremio.classList.remove('was-validated');
            formPremio.querySelectorAll('.is-invalid').forEach(el => el.classList.remove('is-invalid'));
            durataErrorDiv.classList.remove('is-invalid');

            // --- JS-Validierung ---
            let isValid = true;
            let firstInvalidField = null;

            // 1. Standard-Pflichtfelder
            const standardRequiredFields = formPremio.querySelectorAll('[required]');
            standardRequiredFields.forEach(field => {
                if (field.offsetParent !== null) {
                    if (!field.checkValidity()) {
                        isValid = false;
                        field.classList.add('is-invalid');
                        if (!firstInvalidField) firstInvalidField = field;
                    }
                }
            });

            // 2. Spezifische Dauervalidierung
            // Sicherstellen, dass das versteckte Eingabefeld aktualisiert wird, bevor validiert wird
            if (durataSelect.value === 'custom') {
                updateHiddenDurationFromCustom(); // Bei Bedarf von benutzerdefiniertem Feld aktualisieren
            } else {
                durataHidden.value = durataSelect.value; // Von Select aktualisieren
            }
            const durataFinaleValue = durataHidden.value;
            // Prüfen, ob es eine gültige Zahl zwischen 5 und 30 ist
            const durataNum = parseInt(durataFinaleValue, 10);
            const isDurataValid = !isNaN(durataNum) && durataNum >= 5 && durataNum <= 30;

            if (!isDurataValid) {
                isValid = false;
                durataSelect.classList.add('is-invalid');
                durataCustomInput.classList.add('is-invalid');
                durataErrorDiv.classList.add('is-invalid'); // Allgemeinen Fehler anzeigen
                if (!firstInvalidField) firstInvalidField = durataSelect;
            }

            // Bei fehlgeschlagener Validierung
            if (!isValid) {
                console.log("Validierung fehlgeschlagen.");
                formPremio.classList.add('was-validated'); // Bootstrap-Feedback anzeigen
                if (firstInvalidField) {
                    firstInvalidField.focus();
                    const fieldRect = firstInvalidField.getBoundingClientRect();
                    window.scrollBy({ top: fieldRect.top - 100, behavior: 'smooth' });
                }
                return;
            }

            // --- Bei erfolgreicher Validierung ---
            formPremio.classList.add('was-validated');

            // --- Ladevorgang anzeigen ---
            risultatoPremio.classList.remove("d-none");
            risultatoPremio.innerHTML =
              '<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Berechnung läuft...</span></div><p class="mt-2">Prämienberechnung läuft...</p></div>';
            risultatoPremio.scrollIntoView({ behavior: 'smooth', block: 'start' });

            // --- Daten sammeln ---
            let dati = {
              dataNascita: dateInput.value,
              fumatore: document.getElementById("fumatore").checked,
              durata: durataFinaleValue, // Validierten Wert aus verstecktem Eingabefeld verwenden
              copertura: document.getElementById("copertura").value,
              altezza: document.getElementById("altezza").value || null,
              peso: document.getElementById("peso").value || null,
              durata_select: durataSelect.value, // Zur Referenz
              durata_custom: durataSelect.value === 'custom' ? durataCustomInput.value : null // Zur Referenz
            };

            try {
              // --- API-Aufruf ---
              if (typeof calcolaPremio !== 'function') {
                  throw new Error("Die Funktion calcolaPremio ist nicht definiert.");
              }
              const risultato = await calcolaPremio(dati);

              // --- Ergebnis anzeigen ---
              if (risultato.errore) {
                risultatoPremio.innerHTML = `<div class="alert alert-danger"><h5>Fehler</h5><p>${risultato.errore}</p></div>`;
              } else if (risultato.premium && risultato.premium.length > 0) {
                const premio = risultato.premium[0].yearly_gross_premium;
                const currency = risultato.currency || "CHF";

                risultatoPremio.innerHTML = `
                        <div class="card bg-light">
                            <div class="card-body text-center">
                                <h4 class="card-title">Ihr Angebot</h4>
                                <p class="card-text">Geschätzte Jahresprämie:</p>
                                <h2 class="text-primary mb-4">${premio.toLocaleString('de-CH')} ${currency}</h2>
                                <p class="small text-muted mb-3">Versicherungssumme: ${parseInt(dati.copertura).toLocaleString('de-CH')} ${currency} | Dauer: ${dati.durata} Jahre</p>
                                <button id="btn-richiedi-offerta" class="btn btn-success btn-lg">Angebot anfordern >></button>
                            </div>
                        </div>`;

                calcolaBtn.classList.remove('btn-primary');
                calcolaBtn.classList.add('btn-success');

                sessionStorage.setItem("datiPreventivo", JSON.stringify({ ...dati, premio: premio, currency: currency }));

                const richiediBtn = document.getElementById("btn-richiedi-offerta");
                if (richiediBtn) {
                    richiediBtn.addEventListener("click", function () {
                        window.location.href = "richiesta-offerta-de.html";
                    });
                } else { console.error("Schaltfläche 'Angebot anfordern' nicht gefunden."); }

              } else {
                   risultatoPremio.innerHTML = `<div class="alert alert-warning"><h5>Unerwartetes Ergebnis</h5><p>Es wurde keine gültige Prämie zurückgegeben.</p></div>`;
              }
            } catch (errore) {
              console.error("Fehler bei der Prämienberechnung:", errore);
              risultatoPremio.innerHTML = `
                    <div class="alert alert-danger">
                        <h5>Verbindungs-/Berechnungsfehler</h5>
                        <p>Berechnung konnte nicht abgeschlossen werden. Bitte versuchen Sie es erneut oder kontaktieren Sie den Support.</p>
                        <p class="small text-muted">Details: ${errore.message}</p>
                    </div>`;
            } finally {
                 setTimeout(() => {
                    risultatoPremio.scrollIntoView({ behavior: 'smooth', block: 'start' });
                 }, 100);
            }
          });
        } else {
            console.error("Wesentliche Formularelemente nicht gefunden.");
        }

        // Dauerstatus beim Start initialisieren
        toggleDurataPersonalizzata();

      }); // Ende DOMContentLoaded
    </script>

    <!-- Lazy Loading Script (unverändert) -->
    <script>
      "use strict";
      if ("loading" in HTMLImageElement.prototype) {
        document.querySelectorAll('img[loading="lazy"]').forEach((e) => {
          if(e.dataset.src) e.src = e.dataset.src;
          if (e.getAttribute("style")) { e.setAttribute("data-temp-style", e.getAttribute("style")); }
          if (e.getAttribute("data-aspectratio")) { e.style.paddingTop = 100 * parseFloat(e.getAttribute("data-aspectratio")) + "%"; e.style.height = '0'; }
          e.onload = function () {
            if (e.getAttribute("data-temp-style")) { e.setAttribute("style", e.getAttribute("data-temp-style")); } else { e.removeAttribute("style"); }
            e.removeAttribute("data-temp-style");
            if (e.getAttribute("data-aspectratio")) { e.style.paddingTop = ''; if(!e.getAttribute("style")) e.removeAttribute("style"); }
          };
        });
      }
</script>
  </body>
</html>
