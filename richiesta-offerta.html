<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:image:src"
      content="assets/images/richiesta-offerta-meta.png"
    />
    <meta
      property="og:image"
      content="assets/images/richiesta-offerta-meta.png"
    />
    <meta
      name="twitter:title"
      content="Richiesta di offerta polizza vita caso morte decesso Svizzera"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <link
      rel="shortcut icon"
      href="assets/images/lifeinsure-1-172x172.png"
      type="image/x-icon"
    />
    <meta
      name="description"
      content="Richiesta di offerta polizza vita decesso caso morte in Svizzera Ticino"
    />

    <title>Richiesta di offerta polizza vita caso morte decesso Svizzera</title>
    <link
      rel="stylesheet"
      href="assets/Material-Design-Icons/css/material.css"
    />
    <link rel="stylesheet" href="assets/icon54/style.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css" />
    <link
      rel="stylesheet"
      href="assets/bootstrap/css/bootstrap-reboot.min.css"
    />
    <link
      rel="stylesheet"
      href="assets/web/assets/gdpr-plugin/gdpr-styles.css"
    />
    <link rel="stylesheet" href="assets/popup-overlay-plugin/style.css" />
    <link rel="stylesheet" href="assets/dropdown/css/style.css" />
    <link rel="stylesheet" href="assets/socicon/css/styles.css" />
    <link rel="stylesheet" href="assets/theme/css/style.css" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,400,500,600,700&display=swap"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Space+Grotesk:300,400,500,600,700&display=swap"
    /></noscript>
    <link
      rel="preload"
      as="style"
      href="assets/mobirise/css/mbr-additional.css"
    />
    <link
      rel="stylesheet"
      href="assets/mobirise/css/mbr-additional.css"
      type="text/css"
    />
  </head>
  <body>
    <section
      data-bs-version="5.1"
      class="inspirem5 menu menu1 cid-uF8evbfAkJ"
      once="menu"
      id="menu01-3i"
    >
      <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container-fluid">
          <div class="navbar-brand">
            <span class="navbar-logo">
              <a href="index.html#top">
                <img
                  src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                  alt=""
                  style="height: 3.6rem"
                  loading="lazy"
                  class="lazyload"
                  data-src="assets/images/lifeinsure-1-172x172.png"
                />
              </a>
            </span>
          </div>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-bs-toggle="collapse"
            data-target="#navbarSupportedContent"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarNavAltMarkup"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <div class="hamburger">
              <span></span>
              <span></span>
              <span></span>
              <span></span>
            </div>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown" data-app-modern-menu="true">
              <li class="nav-item">
                <a
                  class="nav-link link text-primary display-7"
                  href="index.html#header01-2"
                  >Home</a
                >
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link link text-primary dropdown-toggle display-7"
                  href="index.html#features01-1"
                  data-toggle="dropdown-submenu"
                  data-bs-toggle="dropdown"
                  data-bs-auto-close="outside"
                  aria-expanded="false"
                  >Polizza decesso</a
                >
                <div class="dropdown-menu" aria-labelledby="dropdown-707">
                  <a
                    class="text-primary dropdown-item display-7"
                    href="index.html#progress-bars02-0"
                    >Vantaggi</a
                  ><a
                    class="text-primary show dropdown-item display-7"
                    href="index.html#progress-bars01-j"
                    >Valore</a
                  ><a
                    class="text-primary show dropdown-item display-7"
                    href="#"
                    data-toggle="modal"
                    data-bs-toggle="modal"
                    data-target="#mbr-popup-2k"
                    data-bs-target="#mbr-popup-2k"
                    ><span
                      class="mdi-content-markunread mbr-iconfont mbr-iconfont-btn"
                    ></span
                    >Una storia vera (leggi)</a
                  ><a
                    class="text-primary show dropdown-item display-7"
                    href="index.html#testimonials04-g"
                    >Testimonianze</a
                  >
                </div>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link link text-primary display-7"
                  href="index.html#forms03-5"
                  >Chi siamo</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link link text-primary display-7"
                  href="index.html#forms03-5"
                  >Contatti</a
                >
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link link text-primary dropdown-toggle show display-7"
                  href="index.html#forms03-5"
                  data-toggle="dropdown-submenu"
                  data-bs-toggle="dropdown"
                  data-bs-auto-close="outside"
                  aria-expanded="false"
                  ><span
                    class="icon54-v1-translate2 mbr-iconfont mbr-iconfont-btn"
                  ></span
                ></a>
                <div
                  class="dropdown-menu show"
                  aria-labelledby="dropdown-852"
                  data-bs-popper="none"
                >
                  <a
                    class="text-primary dropdown-item display-7"
                    href="https://de.lifeinsure.ch"
                    target="_blank"
                    >Deutsch</a
                  ><a
                    class="text-primary dropdown-item display-7"
                    href="https://fr.lifeinsure.ch"
                    target="_blank"
                    >Français</a
                  >
                </div>
              </li>
            </ul>

            <div class="navbar-buttons mbr-section-btn">
              <a
                class="btn btn-lg btn-danger display-4"
                href="index.html#features04-2"
                ><span
                  class="icon54-v1-click-1 mbr-iconfont mbr-iconfont-btn"
                ></span
                >PREVENTIVO&nbsp;</a
              >
            </div>
          </div>
        </div>
      </nav>
    </section>

    <section
      data-bs-version="5.1"
      class="inspirem5 header3 cid-uF8evbKQfT"
      id="header03-3j"
    >
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-lg-11">
            <h2 class="mbr-section-subtitle mbr-fonts-style mb-3 display-2">
              Richiesta di offerta
            </h2>
          </div>
        </div>
      </div>
    </section>

    <div id="custom-html-3k">
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Richiesta Offerta Polizza Vita - Squarelife</title>
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      />
      <style>
        .form-section {
          display: none;
        }
        .form-section.active {
          display: block;
        }
        .progress {
          height: 8px;
          margin-bottom: 30px;
        }
        .step-indicator {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }
        .step {
          text-align: center;
          flex: 1;
          position: relative;
        }
        .step-number {
          width: 30px;
          height: 30px;
          border-radius: 50%;
          background-color: #dee2e6;
          color: #6c757d;
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto 5px;
          font-weight: bold;
        }
        .step.active .step-number {
          background-color: #0d6efd;
          color: white;
        }
        .step.completed .step-number {
          background-color: #198754;
          color: white;
        }
        .step-title {
          font-size: 0.8rem;
          color: #6c757d;
        }
        .step.active .step-title {
          color: #0d6efd;
          font-weight: bold;
        }
        .step.completed .step-title {
          color: #198754;
        }
        .required-field::after {
          content: "*";
          color: red;
          margin-left: 4px;
        }
        .subtitle {
          background-color: #f8f9fa;
          padding: 10px 15px;
          margin: 20px 0 15px;
          border-left: 4px solid #0d6efd;
          font-size: 1.1rem;
        }
        .info-icon {
          color: #6c757d;
          cursor: pointer;
          margin-left: 5px;
        }
        .is-invalid {
          border-color: #dc3545;
        }
        .invalid-feedback {
          display: none;
          color: #dc3545;
          font-size: 0.875em;
          margin-top: 0.25rem;
        }
        .show-error .is-invalid + .invalid-feedback {
          display: block;
        }
        .show-error input:invalid,
        .show-error select:invalid,
        .show-error textarea:invalid {
          border-color: #dc3545;
        }
        @media (max-width: 767px) {
          .step-title {
            display: none;
          }
        }
      </style>

      <div class="container py-5">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="card shadow">
              <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Richiesta Offerta Polizza Vita</h4>
              </div>
              <div class="card-body">
                <!-- Indicatore progressione -->
                <div class="step-indicator mb-4">
                  <div class="step active" id="step-1">
                    <div class="step-number">1</div>
                    <div class="step-title">Dati personali</div>
                  </div>
                  <div class="step" id="step-2">
                    <div class="step-number">2</div>
                    <div class="step-title">Questionario medico</div>
                  </div>
                  <div class="step" id="step-3">
                    <div class="step-number">3</div>
                    <div class="step-title">Beneficiari e conferma</div>
                  </div>
                </div>

                <div class="progress">
                  <div
                    class="progress-bar"
                    role="progressbar"
                    style="width: 33%"
                    aria-valuenow="33"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>

                <form id="offer-request-form" novalidate="">
                  <!-- STEP 1: Dati personali -->
                  <div class="form-section active" id="section-1">
                    <div class="subtitle">Dati personali</div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="firstname" class="form-label required-field"
                          >Nome</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="firstname"
                          name="firstname"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci il tuo nome
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="lastname" class="form-label required-field"
                          >Cognome</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="lastname"
                          name="lastname"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci il tuo cognome
                        </div>
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="gender" class="form-label required-field"
                          >Genere</label
                        >
                        <select
                          class="form-select"
                          id="gender"
                          name="gender"
                          required=""
                        >
                          <option value="" selected="" disabled="">
                            Seleziona...
                          </option>
                          <option value="M">Maschile</option>
                          <option value="F">Femminile</option>
                        </select>
                        <div class="invalid-feedback">
                          Seleziona il tuo genere
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="birthdate" class="form-label required-field"
                          >Data di nascita</label
                        >
                        <input
                          type="date"
                          class="form-control"
                          id="birthdate"
                          name="birthdate"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci la tua data di nascita
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="street" class="form-label required-field"
                        >Indirizzo</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="street"
                        name="street"
                        required=""
                      />
                      <div class="invalid-feedback">
                        Inserisci il tuo indirizzo
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="zip" class="form-label required-field"
                          >CAP</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="zip"
                          name="zip"
                          required=""
                        />
                        <div class="invalid-feedback">Inserisci il tuo CAP</div>
                      </div>
                      <div class="col-md-4">
                        <label for="city" class="form-label required-field"
                          >Città</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="city"
                          name="city"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci la tua città
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="country" class="form-label required-field"
                          >Paese</label
                        >
                        <select
                          class="form-select"
                          id="country"
                          name="country"
                          required=""
                        >
                          <option value="CH" selected="">Svizzera</option>
                          <option value="IT">Italia</option>
                          <option value="DE">Germania</option>
                          <option value="FR">Francia</option>
                          <option value="AT">Austria</option>
                        </select>
                        <div class="invalid-feedback">
                          Seleziona il tuo paese
                        </div>
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="email" class="form-label required-field"
                          >Email</label
                        >
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci un indirizzo email valido
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="phone" class="form-label">Telefono</label>
                        <input
                          type="tel"
                          class="form-control"
                          id="phone"
                          name="phone"
                        />
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="nationality" class="form-label"
                          >Nazionalità</label
                        >
                        <select
                          class="form-select"
                          id="nationality"
                          name="nationality"
                        >
                          <option value="CH" selected="">Svizzera</option>
                          <option value="IT">Italiana</option>
                          <option value="DE">Tedesca</option>
                          <option value="FR">Francese</option>
                          <option value="AT">Austriaca</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label
                          for="profession"
                          class="form-label required-field"
                          >Professione</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="profession"
                          name="profession"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci la tua professione
                        </div>
                      </div>
                    </div>

                    <div class="subtitle">Dettagli polizza</div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="duration" class="form-label required-field"
                          >Durata (anni)</label
                        >
                        <select
                          class="form-select"
                          id="duration"
                          name="duration"
                          required=""
                        >
                          <option value="" disabled="">
                            Seleziona la durata
                          </option>
                          <option value="5">5 anni</option>
                          <option value="10" selected="">10 anni</option>
                          <option value="15">15 anni</option>
                          <option value="20">20 anni</option>
                          <option value="25">25 anni</option>
                          <option value="30">30 anni</option>
                        </select>
                        <div class="invalid-feedback">
                          Seleziona la durata della polizza
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="coverage" class="form-label required-field"
                          >Copertura (CHF)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="coverage"
                          name="coverage"
                          min="50000"
                          max="1000000"
                          step="10000"
                          value="100000"
                          required=""
                        />
                        <div class="invalid-feedback">
                          Inserisci un importo di copertura valido
                        </div>
                      </div>
                    </div>

                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="mode" class="form-label required-field"
                          >Modalità di pagamento</label
                        >
                        <select
                          class="form-select"
                          id="mode"
                          name="mode"
                          required=""
                        >
                          <option value="annual" selected="">Annuale</option>
                          <option value="monthly">Mensile</option>
                        </select>
                        <div class="invalid-feedback">
                          Seleziona la modalità di pagamento
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label
                          for="payment_type"
                          class="form-label required-field"
                          >Tipo di pagamento</label
                        >
                        <select
                          class="form-select"
                          id="payment_type"
                          name="payment_type"
                          required=""
                        >
                          <option value="invoice_esr" selected="">
                            Fattura ESR
                          </option>
                          <option value="manual">Manuale</option>
                        </select>
                        <div class="invalid-feedback">
                          Seleziona il tipo di pagamento
                        </div>
                      </div>
                    </div>

                    <div class="d-flex justify-content-end mt-4">
                      <button type="button" id="next-1" class="btn btn-primary">
                        Avanti
                      </button>
                    </div>
                  </div>

                  <!-- STEP 2: Questionario medico -->
                  <div class="form-section" id="section-2">
                    <div class="subtitle">Informazioni di salute</div>

                    <div class="mb-3">
                      <label for="height" class="form-label required-field"
                        >Altezza (cm)</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="height"
                        name="height"
                        min="100"
                        max="250"
                        required=""
                      />
                      <div class="invalid-feedback">
                        Inserisci un'altezza valida (tra 100 e 250 cm)
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="weight" class="form-label required-field"
                        >Peso (kg)</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="weight"
                        name="weight"
                        min="30"
                        max="200"
                        required=""
                      />
                      <div class="invalid-feedback">
                        Inserisci un peso valido (tra 30 e 200 kg)
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="smoker"
                          name="smoker"
                        />
                        <label class="form-check-label" for="smoker">
                          Sei fumatore o hai fumato negli ultimi 2 anni?
                        </label>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label"
                        >Hai già altre assicurazioni sulla vita?</label
                      >
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          id="existing_insurance_yes"
                          name="existing_insurance"
                          value="yes"
                        />
                        <label
                          class="form-check-label"
                          for="existing_insurance_yes"
                          >Sì</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          id="existing_insurance_no"
                          name="existing_insurance"
                          value="no"
                          checked=""
                        />
                        <label
                          class="form-check-label"
                          for="existing_insurance_no"
                          >No</label
                        >
                      </div>

                      <div id="existing_insurance_details" class="mt-3 d-none">
                        <label for="existing_coverage" class="form-label"
                          >Copertura totale esistente (CHF)</label
                        >
                        <input
                          type="number"
                          class="form-control"
                          id="existing_coverage"
                          name="existing_coverage"
                        />
                      </div>
                    </div>

                    <div class="mb-3">
                      <label class="form-label"
                        >Negli ultimi 5 anni, hai avuto assenze dal lavoro di
                        oltre un mese per malattia?</label
                      >
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          id="work_absence_yes"
                          name="work_absence"
                          value="yes"
                        />
                        <label class="form-check-label" for="work_absence_yes"
                          >Sì</label
                        >
                      </div>
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="radio"
                          id="work_absence_no"
                          name="work_absence"
                          value="no"
                          checked=""
                        />
                        <label class="form-check-label" for="work_absence_no"
                          >No</label
                        >
                      </div>

                      <div id="work_absence_details" class="mt-3 d-none">
                        <label class="form-label"
                          >La condizione è risolta da almeno 2 anni senza
                          trattamenti?</label
                        >
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            id="work_absence_resolved_yes"
                            name="work_absence_resolved"
                            value="yes"
                          />
                          <label
                            class="form-check-label"
                            for="work_absence_resolved_yes"
                            >Sì</label
                          >
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            id="work_absence_resolved_no"
                            name="work_absence_resolved"
                            value="no"
                          />
                          <label
                            class="form-check-label"
                            for="work_absence_resolved_no"
                            >No</label
                          >
                        </div>
                      </div>
                    </div>

                    <div class="subtitle">Condizioni mediche</div>

                    <div class="mb-3">
                      <label class="form-label"
                        >Negli ultimi 5 anni, hai sofferto di una delle seguenti
                        condizioni?</label
                      >

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="heart_disease"
                          name="conditions[]"
                          value="heart_disease"
                        />
                        <label class="form-check-label" for="heart_disease">
                          Problemi cardiaci o infarto
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="stroke"
                          name="conditions[]"
                          value="stroke"
                        />
                        <label class="form-check-label" for="stroke">
                          Ictus
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="diabetes"
                          name="conditions[]"
                          value="diabetes"
                        />
                        <label class="form-check-label" for="diabetes">
                          Diabete
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="cancer"
                          name="conditions[]"
                          value="cancer"
                        />
                        <label class="form-check-label" for="cancer">
                          Tumore
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="epilepsy"
                          name="conditions[]"
                          value="epilepsy"
                        />
                        <label class="form-check-label" for="epilepsy">
                          Epilessia
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="kidney_disease"
                          name="conditions[]"
                          value="kidney_disease"
                        />
                        <label class="form-check-label" for="kidney_disease">
                          Malattie renali
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="multiple_sclerosis"
                          name="conditions[]"
                          value="multiple_sclerosis"
                        />
                        <label
                          class="form-check-label"
                          for="multiple_sclerosis"
                        >
                          Sclerosi multipla
                        </label>
                      </div>

                      <div class="form-check mb-2">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="mental_health"
                          name="conditions[]"
                          value="mental_health"
                        />
                        <label class="form-check-label" for="mental_health">
                          Problemi di salute mentale
                        </label>
                      </div>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                      <button
                        type="button"
                        id="prev-2"
                        class="btn btn-secondary"
                      >
                        Indietro
                      </button>
                      <button type="button" id="next-2" class="btn btn-primary">
                        Avanti
                      </button>
                    </div>
                  </div>

                  <!-- STEP 3: Beneficiari e conferma -->
                  <div class="form-section" id="section-3">
                    <div class="subtitle">Beneficiari</div>

                    <div class="mb-3">
                      <label
                        for="beneficiary_type"
                        class="form-label required-field"
                        >Tipo di beneficiario</label
                      >
                      <select
                        class="form-select"
                        id="beneficiary_type"
                        name="beneficiary_type"
                        required=""
                      >
                        <option value="legal" selected="">
                          Beneficiari legali
                        </option>
                        <option value="partner">Coniuge/Partner</option>
                        <option value="child">Figli</option>
                        <option value="parents">Genitori</option>
                        <option value="partnerAndChild">Partner e figli</option>
                        <option value="testamentary">Testamentario</option>
                        <option value="individual">
                          Nominativo individuale
                        </option>
                        <option value="custom">Personalizzato</option>
                      </select>
                      <div class="invalid-feedback">
                        Seleziona il tipo di beneficiario
                      </div>
                    </div>

                    <div id="beneficiary_details" class="d-none">
                      <div class="alert alert-info">
                        Per specificare i beneficiari individuali, completa i
                        campi seguenti. Nella richiesta definitiva avrai la
                        possibilità di aggiungere più beneficiari.
                      </div>

                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label for="beneficiary_firstname" class="form-label"
                            >Nome beneficiario</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="beneficiary_firstname"
                            name="beneficiary_firstname"
                          />
                        </div>
                        <div class="col-md-6">
                          <label for="beneficiary_lastname" class="form-label"
                            >Cognome beneficiario</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="beneficiary_lastname"
                            name="beneficiary_lastname"
                          />
                        </div>
                      </div>

                      <div class="mb-3">
                        <label for="beneficiary_relation" class="form-label"
                          >Relazione</label
                        >
                        <select
                          class="form-select"
                          id="beneficiary_relation"
                          name="beneficiary_relation"
                        >
                          <option value="spouse">Coniuge</option>
                          <option value="child">Figlio/a</option>
                          <option value="parent">Genitore</option>
                          <option value="sibling">Fratello/Sorella</option>
                          <option value="other">Altro</option>
                        </select>
                      </div>
                    </div>

                    <div class="subtitle">Privacy e consenso</div>

                    <div class="mb-3">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="privacy_consent"
                          name="privacy_consent"
                          required=""
                        />
                        <label
                          class="form-check-label required-field"
                          for="privacy_consent"
                        >
                          Ho letto e accettato l'informativa sulla privacy e
                          acconsento al trattamento dei miei dati personali
                        </label>
                        <div class="invalid-feedback">
                          Devi accettare l'informativa sulla privacy per
                          procedere
                        </div>
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="terms_consent"
                          name="terms_consent"
                          required=""
                        />
                        <label
                          class="form-check-label required-field"
                          for="terms_consent"
                        >
                          Confermo che le informazioni fornite sono complete e
                          veritiere
                        </label>
                        <div class="invalid-feedback">
                          Devi confermare la veridicità delle informazioni
                        </div>
                      </div>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                      <button
                        type="button"
                        id="prev-3"
                        class="btn btn-secondary"
                      >
                        Indietro
                      </button>
                      <button type="submit" class="btn btn-success">
                        Invia richiesta
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          // Elementi del form
          const form = document.getElementById("offer-request-form");
          const sections = document.querySelectorAll(".form-section");
          const progressBar = document.querySelector(".progress-bar");
          const steps = document.querySelectorAll(".step");

          // Pulsanti di navigazione
          const next1Button = document.getElementById("next-1");
          const next2Button = document.getElementById("next-2");
          const prev2Button = document.getElementById("prev-2");
          const prev3Button = document.getElementById("prev-3");

          // Campi condizionali
          const existingInsuranceRadios = document.querySelectorAll(
            'input[name="existing_insurance"]'
          );
          const existingInsuranceDetails = document.getElementById(
            "existing_insurance_details"
          );

          const workAbsenceRadios = document.querySelectorAll(
            'input[name="work_absence"]'
          );
          const workAbsenceDetails = document.getElementById(
            "work_absence_details"
          );

          const riskyActivitiesRadios = document.querySelectorAll(
            'input[name="risky_activities"]'
          );
          const riskyActivitiesDetails = document.getElementById(
            "risky_activities_details"
          );

          const beneficiaryTypeSelect =
            document.getElementById("beneficiary_type");
          const beneficiaryDetails = document.getElementById(
            "beneficiary_details"
          );

          // Funzione per validare una sezione
          function validateSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.add("show-error");

            const requiredFields = section.querySelectorAll(
              "input[required], select[required], textarea[required]"
            );
            let valid = true;

            requiredFields.forEach((field) => {
              if (!field.checkValidity()) {
                valid = false;
                field.classList.add("is-invalid");
              } else {
                field.classList.remove("is-invalid");
              }
            });

            return valid;
          }

          // Funzione per passare alla sezione successiva
          function goToSection(currentSection, nextSection) {
            document.getElementById(currentSection).classList.remove("active");
            document.getElementById(nextSection).classList.add("active");

            // Aggiorna indicatore di progresso
            if (nextSection === "section-2") {
              progressBar.style.width = "66%";
              progressBar.setAttribute("aria-valuenow", "66");
              steps[0].classList.add("completed");
              steps[0].classList.remove("active");
              steps[1].classList.add("active");
            } else if (nextSection === "section-3") {
              progressBar.style.width = "100%";
              progressBar.setAttribute("aria-valuenow", "100");
              steps[1].classList.add("completed");
              steps[1].classList.remove("active");
              steps[2].classList.add("active");
            } else if (nextSection === "section-1") {
              progressBar.style.width = "33%";
              progressBar.setAttribute("aria-valuenow", "33");
              steps[1].classList.remove("active");
              steps[0].classList.remove("completed");
              steps[0].classList.add("active");
            }
          }

          // Gestione dei campi condizionali
          existingInsuranceRadios.forEach((radio) => {
            radio.addEventListener("change", function () {
              if (this.value === "yes" && this.checked) {
                existingInsuranceDetails.classList.remove("d-none");
              } else {
                existingInsuranceDetails.classList.add("d-none");
              }
            });
          });

          workAbsenceRadios.forEach((radio) => {
            radio.addEventListener("change", function () {
              if (this.value === "yes" && this.checked) {
                workAbsenceDetails.classList.remove("d-none");
              } else {
                workAbsenceDetails.classList.add("d-none");
              }
            });
          });

          riskyActivitiesRadios.forEach((radio) => {
            radio.addEventListener("change", function () {
              if (this.value === "yes" && this.checked) {
                riskyActivitiesDetails.classList.remove("d-none");
              } else {
                riskyActivitiesDetails.classList.add("d-none");
              }
            });
          });

          beneficiaryTypeSelect.addEventListener("change", function () {
            if (this.value === "individual" || this.value === "custom") {
              beneficiaryDetails.classList.remove("d-none");
            } else {
              beneficiaryDetails.classList.add("d-none");
            }
          });

          // Navigazione tra le sezioni
          next1Button.addEventListener("click", function () {
            if (validateSection("section-1")) {
              goToSection("section-1", "section-2");
            }
          });

          next2Button.addEventListener("click", function () {
            if (validateSection("section-2")) {
              goToSection("section-2", "section-3");
            }
          });

          prev2Button.addEventListener("click", function () {
            goToSection("section-2", "section-1");
          });

          prev3Button.addEventListener("click", function () {
            goToSection("section-3", "section-2");
          });

          // Gestione invio form
          form.addEventListener("submit", async function (event) {
            event.preventDefault();

            if (validateSection("section-3")) {
              // Simulazione invio dati (in produzione qui ci sarebbe la chiamata API)
              const formOfertaData = new FormData(form);

              let values = Object.fromEntries(formOfertaData.entries());

              values.health_questions = [
                document.getElementById("heart_disease"),
                document.getElementById("stroke"),
                document.getElementById("diabetes"),
                document.getElementById("cancer"),
                document.getElementById("epilepsy"),
                document.getElementById("kidney_disease"),
                document.getElementById("multiple_sclerosis"),
                document.getElementById("mental_health"),
              ];

              const response = await richiediOfferta(values);
              console.log(response);
              if (response.status === "ok") {
                alert(
                  "Richiesta inviata con successo! Riceverai presto una email con la tua offerta."
                );
              } else {
                alert("Errore");
              }

              // Qui si potrebbe reindirizzare l'utente a una pagina di conferma
              // window.location.href = 'conferma.html';
            }
          });
        });
      </script>
    </div>

    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/smoothscroll/smooth-scroll.js"></script>
    <script src="assets/ytplayer/index.js"></script>
    <script src="assets/dropdown/js/navbar-dropdown.js"></script>
    <script src="assets/theme/js/script.js"></script>
    <script src="assets/api-handlerSerhii.js"></script>

    <script>
      "use strict";
      if ("loading" in HTMLImageElement.prototype) {
        document.querySelectorAll('img[loading="lazy"]').forEach((e) => {
          e.src = e.dataset.src;
          if (e.getAttribute("style")) {
            e.setAttribute("data-temp-style", e.getAttribute("style"));
          }
          if (e.getAttribute("data-aspectratio")) {
            e.style.paddingTop = 100 * e.getAttribute("data-aspectratio") + "%";
            e.style.height = 0;
          }
          e.onload = function () {
            if (e.getAttribute("data-temp-style")) {
              e.setAttribute("style", e.getAttribute("data-temp-style"));
            } else {
              e.removeAttribute("style");
            }
            e.removeAttribute("data-temp-style");
          };
        });
      } else {
        const e = document.createElement("script");
        e.src =
          "https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js";
        document.body.appendChild(e);
      }
    </script>
  </body>
</html>
